# äº”çº¿è°±ç®€è°±å­¦ä¹ å™¨ - uni-appç‰ˆ

ä¸€ä¸ªä¸“ä¸šçš„äº”çº¿è°±ç®€è°±å¯¹ç…§å­¦ä¹ åº”ç”¨ï¼Œæ”¯æŒå¤šå¹³å°éƒ¨ç½²ï¼ˆH5ã€å¾®ä¿¡å°ç¨‹åºã€iOSã€Androidï¼‰ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸµ å­¦ä¹ æ¨¡å¼
- **ç»ƒä¹ æ¨¡å¼**ï¼šä¸“æ³¨å­¦ä¹ ï¼Œç¨³æ­¥æå‡
  - æ”¯æŒ30é“é¢˜ã€60é“é¢˜ã€æ— å°½æ¨¡å¼
  - å®æ—¶æ˜¾ç¤ºäº”çº¿è°±å’Œç®€è°±å¯¹ç…§
  - æš‚åœ/ç»§ç»­åŠŸèƒ½
  - è¯¦ç»†ç»Ÿè®¡åˆ†æ
  
- **PKæ¨¡å¼**ï¼šåŒäººå¯¹æˆ˜ï¼Œç«æŠ€ä¹è¶£
  - 30é“é¢˜ã€60é“é¢˜å¯¹æˆ˜
  - ç©å®¶åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»
  - å¤šç»´åº¦å¯¹æ¯”ç»“ç®—
  - èƒœåˆ©è€…çš‡å† åŠ¨æ•ˆ

### ğŸ¹ äº¤äº’ä½“éªŒ
- **é’¢ç´é”®ç›˜**ï¼šå¯è§†åŒ–éŸ³ç¬¦é€‰æ‹©
  - å®Œæ•´88é”®é’¢ç´é”®ç›˜
  - ç™½é”®é»‘é”®çœŸå®å¸ƒå±€
  - ä¸­å¤®Cç‰¹æ®Šæ ‡è¯†
  - éŸ³ç¬¦æ’­æ”¾åé¦ˆ

### ğŸ“Š æ•°æ®åˆ†æ
- **å®æ—¶ç»Ÿè®¡**ï¼šå­¦ä¹ è¿‡ç¨‹å…¨è®°å½•
  - ç­”é¢˜å‡†ç¡®ç‡ç»Ÿè®¡
  - ååº”æ—¶é—´åˆ†æ
  - æš‚åœæ—¶é—´å¤„ç†
  - éŸ³ç¬¦æˆåŠŸç‡è·Ÿè¸ª

- **æ•°æ®å­˜å‚¨**ï¼šäº‘ç«¯æ•°æ®åº“
  - ç”¨æˆ·å­¦ä¹ è®°å½•
  - éŸ³ç¬¦ç»Ÿè®¡åˆ†æ
  - PKå¯¹æˆ˜å†å²
  - å­¦ä¹ è¿›åº¦è¿½è¸ª

### ğŸ¨ UIè®¾è®¡
- **ç°ä»£åŒ–ç•Œé¢**ï¼šæ¯›ç»ç’ƒæ•ˆæœã€æ¸å˜èƒŒæ™¯
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿
- **åŠ¨ç”»æ•ˆæœ**ï¼šæµç•…çš„è¿‡æ¸¡å’Œå¾®äº¤äº’
- **å¤šä¸»é¢˜é€‚é…**ï¼šè‡ªåŠ¨é€‚åº”ç³»ç»Ÿä¸»é¢˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 14+
- npm 6+ æˆ– yarn 1.22+
- HBuilderX 3.0+ (æ¨è)

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘è°ƒè¯•

#### H5 å¼€å‘
```bash
npm run dev:h5
```
è®¿é—® http://localhost:3000

#### å¾®ä¿¡å°ç¨‹åºå¼€å‘
```bash
npm run dev:mp-weixin
```
ç„¶åç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ `dist/dev/mp-weixin` ç›®å½•

#### App å¼€å‘
```bash
npm run dev:app
```

### ç”Ÿäº§æ„å»º

#### H5 æ„å»º
```bash
npm run build:h5
```

#### å¾®ä¿¡å°ç¨‹åºæ„å»º
```bash
npm run build:mp-weixin
```

#### App æ„å»º
```bash
npm run build:app
```

## ğŸ“± å¹³å°éƒ¨ç½²

### H5 éƒ¨ç½²
1. æ„å»ºé¡¹ç›®ï¼š`npm run build:h5`
2. å°† `dist/build/h5` ç›®å½•éƒ¨ç½²åˆ°ä»»æ„é™æ€æœåŠ¡å™¨
3. æ”¯æŒ PWAï¼Œå¯æ·»åŠ åˆ°ä¸»å±å¹•

### å¾®ä¿¡å°ç¨‹åºéƒ¨ç½²
1. æ„å»ºé¡¹ç›®ï¼š`npm run build:mp-weixin`
2. ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ `dist/build/mp-weixin`
3. é…ç½®å°ç¨‹åºä¿¡æ¯å¹¶ä¸Šä¼ å®¡æ ¸
4. æ³¨æ„ï¼šéœ€è¦é…ç½®åˆæ³•åŸŸåå’Œæ•°æ®åº“æƒé™

### App éƒ¨ç½²
1. æ„å»ºé¡¹ç›®ï¼š`npm run build:app`
2. ç”¨ HBuilderX æ‰“å¼€é¡¹ç›®
3. å‘è¡Œ -> åŸç”ŸAppäº‘æ‰“åŒ…
4. æ”¯æŒ iOS App Store å’Œ Android åº”ç”¨å•†åº—

## ğŸ—ƒï¸ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ pages/                  # é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ index/              # é¦–é¡µ
â”‚   â””â”€â”€ learning/           # å­¦ä¹ é¡µé¢
â”œâ”€â”€ components/             # ç»„ä»¶åº“
â”œâ”€â”€ utils/                  # å·¥å…·åº“
â”‚   â”œâ”€â”€ database.js         # æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ music.js            # éŸ³ä¹ç›¸å…³å·¥å…·
â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â””â”€â”€ js/                 # JavaScriptåº“
â”œâ”€â”€ App.vue                 # åº”ç”¨å…¥å£
â”œâ”€â”€ main.js                 # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ manifest.json           # åº”ç”¨é…ç½®
â”œâ”€â”€ pages.json              # é¡µé¢è·¯ç”±é…ç½®
â””â”€â”€ vite.config.js          # æ„å»ºé…ç½®
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**ï¼šuni-app 3.0 + Vue 3
- **æ„å»º**ï¼šVite 5.0
- **æ•°æ®åº“**ï¼šTurso (SQLite)
- **äº”çº¿è°±æ¸²æŸ“**ï¼šABCJS
- **éŸ³é¢‘**ï¼šWeb Audio API
- **æ ·å¼**ï¼šåŸç”ŸCSS + å“åº”å¼è®¾è®¡

## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½

### äº”çº¿è°±æ¸²æŸ“
- åŸºäº ABCJS åº“å®ç°ä¸“ä¸šäº”çº¿è°±æ¸²æŸ“
- æ”¯æŒå„ç§éŸ³ç¬¦ã€è°ƒå·ã€æ‹å·
- è‡ªé€‚åº”å¤§å°å’Œæ ·å¼

### éŸ³é¢‘æ’­æ”¾
- Web Audio API åŸç”ŸéŸ³é¢‘åˆæˆ
- çœŸå®é’¢ç´éŸ³è‰²æ¨¡æ‹Ÿ
- ä½å»¶è¿ŸéŸ³é¢‘åé¦ˆ

### æ•°æ®æŒä¹…åŒ–
- äº‘ç«¯æ•°æ®åº“å­˜å‚¨
- ç”¨æˆ·è®¾å¤‡æŒ‡çº¹è¯†åˆ«
- ç¦»çº¿æ•°æ®åŒæ­¥æ”¯æŒ

### è·¨å¹³å°å…¼å®¹
- ç»Ÿä¸€çš„ä»£ç åº“
- å¹³å°ç‰¹æ€§é€‚é…
- åŸç”Ÿæ€§èƒ½ä¼˜åŒ–

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ (users)
- id: ç”¨æˆ·ID
- identifier: è®¾å¤‡æŒ‡çº¹
- created_at: åˆ›å»ºæ—¶é—´

### å­¦ä¹ ä¼šè¯è¡¨ (learning_sessions)
- id: ä¼šè¯ID
- user_id: ç”¨æˆ·ID
- mode: å­¦ä¹ æ¨¡å¼
- question_count: é¢˜ç›®æ•°é‡
- start_time/end_time: å¼€å§‹/ç»“æŸæ—¶é—´
- total_questions: æ€»é¢˜æ•°
- correct_answers: æ­£ç¡®æ•°
- accuracy_rate: å‡†ç¡®ç‡
- avg_reaction_time: å¹³å‡ååº”æ—¶é—´

### é¢˜ç›®è®°å½•è¡¨ (question_records)
- session_id: ä¼šè¯ID
- note_name: éŸ³ç¬¦åç§°
- note_octave: å…«åº¦
- user_answer: ç”¨æˆ·ç­”æ¡ˆ
- is_correct: æ˜¯å¦æ­£ç¡®
- reaction_time: ååº”æ—¶é—´
- pause_duration: æš‚åœæ—¶é•¿

### éŸ³ç¬¦ç»Ÿè®¡è¡¨ (note_statistics)
- user_id: ç”¨æˆ·ID
- note_name: éŸ³ç¬¦åç§°
- note_octave: å…«åº¦
- total_attempts: æ€»å°è¯•æ¬¡æ•°
- correct_attempts: æ­£ç¡®æ¬¡æ•°
- success_rate: æˆåŠŸç‡
- avg_reaction_time: å¹³å‡ååº”æ—¶é—´

### PKå¯¹æˆ˜è¡¨ (pk_battles)
- user_id: ç”¨æˆ·ID
- p1_total/p2_total: ç©å®¶æ€»é¢˜æ•°
- p1_correct/p2_correct: ç©å®¶æ­£ç¡®æ•°
- p1_accuracy/p2_accuracy: ç©å®¶å‡†ç¡®ç‡
- p1_avg_reaction/p2_avg_reaction: ç©å®¶å¹³å‡ååº”æ—¶é—´
- winner: è·èƒœè€…

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°éŸ³ç¬¦
åœ¨ `utils/music.js` çš„ `notes` æ•°ç»„ä¸­æ·»åŠ ï¼š
```javascript
{
  id: 'C4',
  name: 'C',
  octave: 4,
  abc: 'C',
  frequency: 261.63,
  jianpu: '1',
  clef: 'treble',
  isLedger: true,
  position: 0.5
}
```

### è‡ªå®šä¹‰ä¸»é¢˜
ä¿®æ”¹ `App.vue` ä¸­çš„å…¨å±€æ ·å¼å˜é‡ï¼š
```css
:root {
  --primary-color: #007AFF;
  --gradient-start: #667eea;
  --gradient-end: #764ba2;
}
```

### æ·»åŠ æ–°å¹³å°
1. åœ¨ `manifest.json` ä¸­æ·»åŠ å¹³å°é…ç½®
2. åœ¨ `package.json` ä¸­æ·»åŠ æ„å»ºè„šæœ¬
3. åœ¨ä»£ç ä¸­ä½¿ç”¨æ¡ä»¶ç¼–è¯‘ `#ifdef MP-PLATFORM`

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**ï¼šæŒ‰é¡µé¢è‡ªåŠ¨åˆ†å‰²ä»£ç 
- **èµ„æºé¢„åŠ è½½**ï¼šå…³é”®èµ„æºé¢„åŠ è½½
- **å›¾ç‰‡ä¼˜åŒ–**ï¼šWebPæ ¼å¼æ”¯æŒ
- **ç¼“å­˜ç­–ç•¥**ï¼šé™æ€èµ„æºé•¿ç¼“å­˜
- **æ‡’åŠ è½½**ï¼šéå…³é”®ç»„ä»¶æ‡’åŠ è½½

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **ABCJS åœ¨å°ç¨‹åºä¸å·¥ä½œ**
   - å°ç¨‹åºä¸æ”¯æŒ DOM æ“ä½œï¼Œéœ€è¦ä½¿ç”¨ Canvas æ›¿ä»£æ–¹æ¡ˆ

2. **éŸ³é¢‘æ’­æ”¾æ— å£°éŸ³**
   - æ£€æŸ¥ Web Audio API å…¼å®¹æ€§
   - ç¡®ä¿ç”¨æˆ·äº¤äº’åæ‰æ’­æ”¾éŸ³é¢‘

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œé…ç½®å’ŒåŸŸåç™½åå•
   - éªŒè¯æ•°æ®åº“å‡­æ®

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨ `console.log` è¿›è¡Œè°ƒè¯•
- H5 å¯ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- å°ç¨‹åºä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è°ƒè¯•é¢æ¿

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®åœ°å€ï¼š[GitHub](https://github.com/your-username/music-learning-uniapp)
- é—®é¢˜åé¦ˆï¼š[Issues](https://github.com/your-username/music-learning-uniapp/issues)

---

**äº”çº¿è°±ç®€è°±å­¦ä¹ å™¨** - è®©éŸ³ä¹å­¦ä¹ æ›´ç®€å•ï¼Œæ›´æœ‰è¶£ï¼ğŸµ 