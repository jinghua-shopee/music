# äº”çº¿è°±ç®€è°±å­¦ä¹ å™¨ - å¾®ä¿¡å°ç¨‹åºè¾“å‡ºæŒ‡å—

## âš ï¸ å½“å‰é”™è¯¯è§£å†³æ–¹æ¡ˆ

### å·²è§£å†³çš„é—®é¢˜
1. **âœ… tabBaré…ç½®é”™è¯¯**ï¼šå·²åˆ é™¤pages.jsonä¸­çš„ç©ºtabBaré…ç½®
2. **âš ï¸ document APIä¸å…¼å®¹**ï¼šéœ€è¦è¿›ä¸€æ­¥å¤„ç†

### é’ˆå¯¹document APIé”™è¯¯çš„è§£å†³æ–¹æ¡ˆ

å½“å‰é”™è¯¯æ˜¯å› ä¸ºé¡¹ç›®åŒ…å«äº†`index.html`æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å¤§é‡Web DOMæ“ä½œä»£ç ã€‚åœ¨uni-appé¡¹ç›®ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸åº”è¯¥è¢«åŒ…å«åœ¨å°ç¨‹åºæ„å»ºä¸­ã€‚

#### ç«‹å³è§£å†³æ–¹æ¡ˆï¼š

1. **åˆ é™¤æˆ–é‡å‘½åindex.html**
```bash
# é‡å‘½åä¸ºå¤‡ä»½æ–‡ä»¶
mv index.html index.html.backup
```

2. **ç¡®ä¿åªä½¿ç”¨Vueç»„ä»¶**
   - ç¡®ä¿æ‰€æœ‰é¡µé¢éƒ½æ˜¯.vueæ–‡ä»¶
   - ç§»é™¤ä»»ä½•ç›´æ¥çš„HTMLæ–‡ä»¶å¼•ç”¨

3. **æ£€æŸ¥æ„å»ºé…ç½®**
   ```json
   // manifest.jsonä¸­ç¡®ä¿mp-weixiné…ç½®æ­£ç¡®
   "mp-weixin": {
       "appid": "wx7f0a51ddda8faa1a",
       "setting": {
           "urlCheck": false,
           "es6": true,
           "minified": true
       }
   }
   ```

---

## æ–¹æ¡ˆä¸€ï¼šHBuilderXç¼–è¯‘ï¼ˆæ¨è - æœ€ç®€å•ï¼‰

### 1. å®‰è£…HBuilderX
1. ä¸‹è½½ [HBuilderX](https://www.dcloud.io/hbuilderx.html)
2. é€‰æ‹©"Appå¼€å‘ç‰ˆ"ï¼ŒåŒ…å«uni-appç¼–è¯‘å™¨

### 2. é¡¹ç›®å¯¼å…¥
1. æ‰“å¼€HBuilderX
2. æ–‡ä»¶ â†’ å¯¼å…¥ â†’ ä»æœ¬åœ°ç›®å½•å¯¼å…¥
3. é€‰æ‹©å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹
4. é¡¹ç›®ç±»å‹é€‰æ‹©"uni-app"

### 3. é…ç½®å°ç¨‹åº
1. ä¿®æ”¹ `manifest.json` ä¸­çš„å°ç¨‹åºé…ç½®ï¼š
```json
{
  "mp-weixin": {
    "appid": "wx7f0a51ddda8faa1a",
    "setting": {
      "urlCheck": false,
      "es6": true,
      "minified": true
    }
  }
}
```

### 4. ç¼–è¯‘å‘å¸ƒ
1. ç‚¹å‡»"è¿è¡Œ" â†’ "è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨" â†’ "å¾®ä¿¡å¼€å‘è€…å·¥å…·"
2. æˆ–ç‚¹å‡»"å‘è¡Œ" â†’ "å°ç¨‹åº-å¾®ä¿¡"

### 5. æ³¨æ„äº‹é¡¹
- éœ€è¦å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·
- éœ€è¦å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…è´¦å·
- âœ… å·²è§£å†³tabBaré…ç½®é—®é¢˜
- âš ï¸ éœ€è¦å¤„ç†document APIå…¼å®¹æ€§

---

## æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨é€‚é…ä¸ºå¾®ä¿¡å°ç¨‹åº

### 1. é¡¹ç›®ç»“æ„è°ƒæ•´
```
miniprogram/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ index.wxml
â”‚   â”‚   â”œâ”€â”€ index.wxss
â”‚   â”‚   â””â”€â”€ index.json
â”‚   â””â”€â”€ learning/
â”‚       â”œâ”€â”€ learning.js
â”‚       â”œâ”€â”€ learning.wxml
â”‚       â”œâ”€â”€ learning.wxss
â”‚       â””â”€â”€ learning.json
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ staff/
â”‚   â”œâ”€â”€ piano/
â”‚   â””â”€â”€ jianpu/
â”œâ”€â”€ utils/
â”œâ”€â”€ app.js
â”œâ”€â”€ app.json
â”œâ”€â”€ app.wxss
â””â”€â”€ project.config.json
```

### 2. æ ¸å¿ƒæ–‡ä»¶è½¬æ¢

#### app.json
```json
{
  "pages": [
    "pages/index/index",
    "pages/learning/learning"
  ],
  "window": {
    "navigationBarTitleText": "äº”çº¿è°±ç®€è°±å­¦ä¹ å™¨",
    "navigationBarBackgroundColor": "#667eea",
    "navigationBarTextStyle": "white",
    "backgroundColor": "#667eea"
  },
  "sitemapLocation": "sitemap.json"
}
```

#### é¦–é¡µ (pages/index/index.wxml)
```xml
<view class="container">
  <view class="title">äº”çº¿è°±ç®€è°±å¯¹ç…§å­¦ä¹ </view>
  
  <view class="mode-selection">
    <view class="selection-title">é€‰æ‹©å­¦ä¹ æ¨¡å¼</view>
    <view class="mode-cards">
      <view class="mode-card {{selectedMode === 'practice' ? 'active' : ''}}" 
            bindtap="selectMode" data-mode="practice">
        <view class="mode-icon">ğŸ“š</view>
        <view class="mode-name">ç»ƒä¹ æ¨¡å¼</view>
      </view>
      <view class="mode-card {{selectedMode === 'pk' ? 'active' : ''}}" 
            bindtap="selectMode" data-mode="pk">
        <view class="mode-icon">âš”ï¸</view>
        <view class="mode-name">PKæ¨¡å¼</view>
      </view>
    </view>
  </view>
  
  <view class="question-selection">
    <view class="selection-title">é€‰æ‹©é¢˜ç›®æ•°é‡</view>
    <view class="question-options">
      <view class="question-option {{selectedCount === 15 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="15">
        <view class="option-number">15</view>
        <view class="option-label">é“é¢˜</view>
      </view>
      <view class="question-option {{selectedCount === 30 ? 'active' : ''}}" 
            bindtap="selectCount" data-count="30">
        <view class="option-number">30</view>
        <view class="option-label">é“é¢˜</view>
      </view>
    </view>
  </view>
  
  <button class="start-btn {{canStart ? '' : 'disabled'}}" bindtap="startLearning">
    å¼€å§‹å­¦ä¹ 
  </button>
</view>
```

#### å­¦ä¹ é¡µé¢ç»„ä»¶é€‚é…
- **äº”çº¿è°±ç»„ä»¶**: ä½¿ç”¨Canvas APIç»˜åˆ¶äº”çº¿è°±ï¼Œæ›¿ä»£ABC.js
- **é’¢ç´ç»„ä»¶**: ä½¿ç”¨åŸç”Ÿviewç»„ä»¶å®ç°
- **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨å°ç¨‹åºçš„å…¨å±€æ•°æ®æˆ–æœ¬åœ°å­˜å‚¨

### 3. å…³é”®é€‚é…ç‚¹

#### éŸ³é¢‘æ’­æ”¾
```javascript
// utils/audio.js
const audioContext = wx.createInnerAudioContext()

export function playNote(frequency, duration = 1000) {
  // å°ç¨‹åºéŸ³é¢‘æ’­æ”¾é€»è¾‘
  audioContext.src = generateToneUrl(frequency)
  audioContext.play()
  
  setTimeout(() => {
    audioContext.stop()
  }, duration)
}
```

#### äº”çº¿è°±ç»˜åˆ¶
```javascript
// components/staff/staff.js
Component({
  methods: {
    drawStaff() {
      const ctx = wx.createCanvasContext('staffCanvas', this)
      
      // ç»˜åˆ¶äº”çº¿è°±
      for (let i = 0; i < 5; i++) {
        const y = 50 + i * 20
        ctx.moveTo(50, y)
        ctx.lineTo(300, y)
        ctx.stroke()
      }
      
      // ç»˜åˆ¶éŸ³ç¬¦
      this.drawNote(ctx, this.data.note)
      
      ctx.draw()
    }
  }
})
```

---

## æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨Taroæ¡†æ¶

### 1. åˆ›å»ºTaroé¡¹ç›®
```bash
# å®‰è£…Taro CLI
npm install -g @tarojs/cli

# åˆ›å»ºé¡¹ç›®
taro init music-learning-taro

# é€‰æ‹©Vueæ¨¡æ¿
```

### 2. è¿ç§»ä»£ç 
1. å°†Vueç»„ä»¶è½¬æ¢ä¸ºTaroç»„ä»¶
2. ä¿®æ”¹æ ·å¼ä¸ºå°ç¨‹åºå…¼å®¹æ ¼å¼
3. é€‚é…å°ç¨‹åºAPI

### 3. ç¼–è¯‘å‘å¸ƒ
```bash
# ç¼–è¯‘ä¸ºå¾®ä¿¡å°ç¨‹åº
npm run build:weapp

# å¼€å‘æ¨¡å¼
npm run dev:weapp
```

---

## æ¨èå®æ–½æ­¥éª¤

### ç¬¬ä¸€é˜¶æ®µï¼šé€‰æ‹©æ–¹æ¡ˆ
1. **æ–°æ‰‹æ¨è**: æ–¹æ¡ˆä¸€ï¼ˆHBuilderXï¼‰- é›¶é…ç½®ï¼Œç›´æ¥å¯¼å…¥ç¼–è¯‘
2. **æœ‰ç»éªŒæ¨è**: æ–¹æ¡ˆäºŒï¼ˆæ‰‹åŠ¨é€‚é…ï¼‰- å®Œå…¨æ§åˆ¶ï¼Œæ€§èƒ½æœ€ä¼˜
3. **å›¢é˜Ÿå¼€å‘æ¨è**: æ–¹æ¡ˆä¸‰ï¼ˆTaroï¼‰- ä»£ç å¤ç”¨ï¼Œè·¨å¹³å°

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½é€‚é…
1. âœ… åˆ é™¤index.htmlæ–‡ä»¶é¿å…document APIå†²çª
2. éŸ³é¢‘æ’­æ”¾åŠŸèƒ½é€‚é…
3. äº”çº¿è°±æ˜¾ç¤ºæ–¹æ¡ˆï¼ˆCanvasç»˜åˆ¶ or å›¾ç‰‡ï¼‰
4. è§¦æ‘¸äº¤äº’ä¼˜åŒ–
5. æ€§èƒ½ä¼˜åŒ–

### ç¬¬ä¸‰é˜¶æ®µï¼šå°ç¨‹åºç‰¹æ€§
1. åˆ†äº«åŠŸèƒ½
2. æ•°æ®ç»Ÿè®¡ä¸ŠæŠ¥
3. ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
4. æ’è¡Œæ¦œåŠŸèƒ½

### ç¬¬å››é˜¶æ®µï¼šå‘å¸ƒä¸Šçº¿
1. å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…è´¦å·ç”³è¯·
2. ä»£ç å®¡æ ¸æäº¤
3. ç‰ˆæœ¬å‘å¸ƒç®¡ç†

---

## æŠ€æœ¯éš¾ç‚¹åŠè§£å†³æ–¹æ¡ˆ

### 1. âœ… tabBaré…ç½®é—®é¢˜
- **é—®é¢˜**: pages.jsonä¸­tabBaré…ç½®ä¸å®Œæ•´
- **è§£å†³**: å·²åˆ é™¤ä¸å¿…è¦çš„tabBaré…ç½®

### 2. âš ï¸ document APIä¸å…¼å®¹
- **é—®é¢˜**: index.htmlä¸­åŒ…å«Web DOMæ“ä½œä»£ç 
- **è§£å†³**: åˆ é™¤æˆ–é‡å‘½åindex.htmlæ–‡ä»¶

### 3. ABC.jsåº“é€‚é…
- **é—®é¢˜**: ABC.jsåº“åœ¨å°ç¨‹åºç¯å¢ƒä¸å¯ç”¨
- **è§£å†³**: ä½¿ç”¨Canvas APIæ‰‹ç»˜äº”çº¿è°±ï¼Œæˆ–é¢„ç”Ÿæˆäº”çº¿è°±å›¾ç‰‡

### 4. Web Audio APIé€‚é…
- **é—®é¢˜**: å°ç¨‹åºä¸æ”¯æŒWeb Audio API
- **è§£å†³**: ä½¿ç”¨wx.createInnerAudioContext()æ’­æ”¾é¢„å½•åˆ¶éŸ³é¢‘æ–‡ä»¶

### 5. VuexçŠ¶æ€ç®¡ç†
- **é—®é¢˜**: å°ç¨‹åºä¸æ”¯æŒVuex
- **è§£å†³**: ä½¿ç”¨å°ç¨‹åºå…¨å±€æ•°æ®æˆ–æœ¬åœ°å­˜å‚¨

### 6. å“åº”å¼å¸ƒå±€
- **é—®é¢˜**: å°ç¨‹åºå°ºå¯¸å•ä½å·®å¼‚
- **è§£å†³**: ä½¿ç”¨rpxå•ä½ï¼Œé€‚é…ä¸åŒå±å¹•

---

## é¢„æœŸå·¥ä½œé‡

- **æ–¹æ¡ˆä¸€ï¼ˆHBuilderXï¼‰**: 1-2å¤©ï¼ˆéœ€è¦å¤„ç†document APIé—®é¢˜ï¼‰
- **æ–¹æ¡ˆäºŒï¼ˆæ‰‹åŠ¨é€‚é…ï¼‰**: 5-7å¤©  
- **æ–¹æ¡ˆä¸‰ï¼ˆTaroï¼‰**: 3-5å¤©

## å»ºè®®

**ç«‹å³æ“ä½œ**: åˆ é™¤æˆ–é‡å‘½åindex.htmlæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨HBuilderXé‡æ–°ç¼–è¯‘ã€‚

**å¦‚æœæ‚¨å¸Œæœ›å¿«é€Ÿä¸Šçº¿**ï¼Œå»ºè®®ä½¿ç”¨æ–¹æ¡ˆä¸€ï¼ˆHBuilderXï¼‰ï¼Œç°æœ‰çš„uni-appé…ç½®å·²ç»æ¯”è¾ƒå®Œæ•´ï¼Œåªéœ€è¦è§£å†³document APIå†²çªå³å¯ã€‚

**å¦‚æœæ‚¨å¸Œæœ›æœ€ä½³æ€§èƒ½å’Œå®Œå…¨æ§åˆ¶**ï¼Œå»ºè®®ä½¿ç”¨æ–¹æ¡ˆäºŒï¼Œæ‰‹åŠ¨é€‚é…ä¸ºåŸç”Ÿå°ç¨‹åºä»£ç ã€‚ 