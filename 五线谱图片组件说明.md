# äº”çº¿è°±å›¾ç‰‡ç»„ä»¶æ”¹é€ è¯´æ˜

## ğŸ“ æ”¹é€ å†…å®¹

å·²æˆåŠŸå°†åŸæœ¬çš„Canvasäº”çº¿è°±æ¸²æŸ“æ–¹å¼æ”¹ä¸ºç›´æ¥ä½¿ç”¨å›¾ç‰‡çš„æ–¹å¼ã€‚

## ğŸ”§ ä¸»è¦ä¿®æ”¹

### 1. åˆ›å»ºæ–°ç»„ä»¶ `staff-image`

**ä½ç½®**: `miniprogram/components/staff-image/`

**æ–‡ä»¶ç»“æ„**:
```
staff-image/
â”œâ”€â”€ staff-image.js      # ç»„ä»¶é€»è¾‘
â”œâ”€â”€ staff-image.wxml    # ç»„ä»¶æ¨¡æ¿
â””â”€â”€ staff-image.wxss    # ç»„ä»¶æ ·å¼
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- æ”¯æŒé«˜éŸ³ç¬¦å·(treble)å’Œä½éŸ³ç¬¦å·(bass)
- è‡ªåŠ¨æ ¹æ®éŸ³ç¬¦ä¿¡æ¯æ˜ å°„åˆ°å¯¹åº”çš„å›¾ç‰‡æ–‡ä»¶
- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½ç¬¦
- å“åº”å¼å¸ƒå±€ï¼Œè‡ªé€‚åº”å®¹å™¨å¤§å°

### 2. éŸ³ç¬¦æ˜ å°„é€»è¾‘

ç»„ä»¶ä¼šæ ¹æ®éŸ³ç¬¦çš„`name`å±æ€§ï¼ˆå¦‚"C4", "D4"ç­‰ï¼‰è‡ªåŠ¨æ˜ å°„åˆ°å¯¹åº”çš„å›¾ç‰‡æ–‡ä»¶ï¼š

**é«˜éŸ³ç¬¦å·æ˜ å°„ç¤ºä¾‹**:
- C4 â†’ `treble_C4_ç¬¬2é—´.png`
- D4 â†’ `treble_D4_ç¬¬3çº¿.png`
- E4 â†’ `treble_E4_ç¬¬3é—´.png`

**ä½éŸ³ç¬¦å·æ˜ å°„ç¤ºä¾‹**:
- C3 â†’ `bass_C3_ç¬¬1çº¿.png`
- D3 â†’ `bass_D3_ç¬¬1é—´.png`

### 3. å›¾ç‰‡èµ„æº

**ä½ç½®**: `miniprogram/äº”çº¿è°±/`

**å›¾ç‰‡è§„æ ¼**:
- æ ¼å¼: PNG
- å°ºå¯¸: 700x700åƒç´ 
- èƒŒæ™¯: ç™½è‰²
- å†…å®¹: å®Œæ•´çš„äº”çº¿è°±+éŸ³ç¬¦

**è¦†ç›–èŒƒå›´**:
- é«˜éŸ³ç¬¦å·: A2 åˆ° D6 (25å¼ å›¾ç‰‡)
- ä½éŸ³ç¬¦å·: C1 åˆ° C5 (26å¼ å›¾ç‰‡)
- æ€»è®¡: 51å¼ å›¾ç‰‡

### 4. é¡µé¢ä¿®æ”¹

**å­¦ä¹ é¡µé¢** (`pages/learning/learning.wxml`):
```xml
<!-- åŸæ¥çš„Canvasæ¸²æŸ“ -->
<vex-staff note="{{currentNote}}" showDebugInfo="{{showDebugInfo}}" />

<!-- æ”¹ä¸ºå›¾ç‰‡æ¸²æŸ“ -->
<staff-image note="{{currentNote}}" clef="treble" />
```

**é…ç½®æ–‡ä»¶** (`pages/learning/learning.json`):
```json
{
  "usingComponents": {
    "staff-image": "../../components/staff-image/staff-image"
  }
}
```

## ğŸ§ª æµ‹è¯•é¡µé¢

åˆ›å»ºäº†ä¸“é—¨çš„æµ‹è¯•é¡µé¢ `pages/test-staff/test-staff` ç”¨äºéªŒè¯ç»„ä»¶åŠŸèƒ½ï¼š

**è®¿é—®æ–¹å¼**: åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç›´æ¥è®¿é—®è¯¥é¡µé¢

**åŠŸèƒ½**:
- å¾ªç¯æ˜¾ç¤ºC4-C5çš„8ä¸ªéŸ³ç¬¦
- å®æ—¶åˆ‡æ¢æŸ¥çœ‹å›¾ç‰‡åŠ è½½æ•ˆæœ
- éªŒè¯éŸ³ç¬¦æ˜ å°„æ˜¯å¦æ­£ç¡®

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•
```xml
<staff-image note="{{noteObject}}" clef="treble" />
```

### å±æ€§è¯´æ˜
- `note`: éŸ³ç¬¦å¯¹è±¡ï¼Œéœ€åŒ…å«`name`å±æ€§ï¼ˆå¦‚"C4", "D4"ç­‰ï¼‰
- `clef`: è°±å·ç±»å‹ï¼Œæ”¯æŒ"treble"ï¼ˆé«˜éŸ³ç¬¦å·ï¼‰å’Œ"bass"ï¼ˆä½éŸ³ç¬¦å·ï¼‰

### éŸ³ç¬¦å¯¹è±¡æ ¼å¼
```javascript
{
  name: 'C4',           // éŸ³ç¬¦åç§°ï¼ˆå¿…éœ€ï¼‰
  pianoKey: 'c4',       // é’¢ç´é”®ä½
  staffPosition: 'line1', // äº”çº¿è°±ä½ç½®
  jianpu: '1'           // ç®€è°±è®°å·
}
```

## âœ… ä¼˜åŠ¿

1. **æ€§èƒ½æå‡**: æ— éœ€Canvasæ¸²æŸ“ï¼Œç›´æ¥æ˜¾ç¤ºå›¾ç‰‡ï¼ŒåŠ è½½æ›´å¿«
2. **è§†è§‰æ•ˆæœ**: é¢„ç”Ÿæˆçš„å›¾ç‰‡è´¨é‡æ›´é«˜ï¼Œæ˜¾ç¤ºæ›´æ¸…æ™°
3. **å…¼å®¹æ€§**: é¿å…Canvaså…¼å®¹æ€§é—®é¢˜
4. **ç»´æŠ¤æ€§**: å›¾ç‰‡èµ„æºç‹¬ç«‹ï¼Œæ˜“äºæ›´æ–°å’Œç»´æŠ¤
5. **æ‰©å±•æ€§**: æ”¯æŒæ›´å¤šéŸ³ç¬¦èŒƒå›´å’Œè°±å·ç±»å‹

## ğŸ”„ å›é€€æ–¹æ¡ˆ

å¦‚éœ€å›é€€åˆ°Canvasæ¸²æŸ“æ–¹å¼ï¼Œåªéœ€ï¼š

1. å°†`learning.wxml`ä¸­çš„`staff-image`æ”¹å›`vex-staff`
2. æ›´æ–°`learning.json`ä¸­çš„ç»„ä»¶é…ç½®
3. åŸæœ‰çš„Canvasç»„ä»¶ä»£ç ä¿æŒä¸å˜

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
```
miniprogram/
â”œâ”€â”€ components/staff-image/
â”‚   â”œâ”€â”€ staff-image.js
â”‚   â”œâ”€â”€ staff-image.wxml
â”‚   â””â”€â”€ staff-image.wxss
â”œâ”€â”€ pages/test-staff/
â”‚   â”œâ”€â”€ test-staff.js
â”‚   â”œâ”€â”€ test-staff.wxml
â”‚   â”œâ”€â”€ test-staff.wxss
â”‚   â””â”€â”€ test-staff.json
â””â”€â”€ äº”çº¿è°±/
    â”œâ”€â”€ treble_*.png (25å¼ )
    â””â”€â”€ bass_*.png (26å¼ )
```

### ä¿®æ”¹æ–‡ä»¶
```
miniprogram/
â”œâ”€â”€ app.json                    # æ·»åŠ æµ‹è¯•é¡µé¢
â”œâ”€â”€ pages/learning/
â”‚   â”œâ”€â”€ learning.wxml          # æ›¿æ¢äº”çº¿è°±ç»„ä»¶
â”‚   â””â”€â”€ learning.json          # æ·»åŠ ç»„ä»¶é…ç½®
```

## ğŸ‰ å®ŒæˆçŠ¶æ€

âœ… ç»„ä»¶åˆ›å»ºå®Œæˆ  
âœ… å›¾ç‰‡èµ„æºå°±ä½  
âœ… é¡µé¢é›†æˆå®Œæˆ  
âœ… æµ‹è¯•é¡µé¢åˆ›å»º  
âœ… æ–‡æ¡£ç¼–å†™å®Œæˆ  

ç°åœ¨å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æµ‹è¯•æ–°çš„å›¾ç‰‡äº”çº¿è°±ç»„ä»¶äº†ï¼ 